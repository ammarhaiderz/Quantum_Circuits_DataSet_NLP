\begin{quantikz}[row sep={0.8cm,between origins}, wire types={q, n, q, q, q}]
        \lstick{$\ket{0}_{\rm ancilla}$} & \gate{H}\gategroup[1, steps = 1, style = {draw=none, fill=none, inner xsep = 0pt}, background, label style={label position = above, anchor = north, yshift = -1.9cm, xshift = -0.0cm}]{\boldsymbol{\vdots}} & \ctrl{1} & \ctrl{1} & \ctrl{1} & \gate[style={draw, dotted}]{S^{\dagger}}\gategroup[1, steps = 1, style = {draw=none, fill=none, inner xsep = 0pt}, background, label style={label position = above, anchor = north, yshift = -1.9cm, xshift = 0.0cm}]{\boldsymbol{\vdots}} & \gate{H}& \meter{\langle\sigma_{z}\rangle} \\ 
        \lstick[4, braces = {black, thick}]{$\ket{0}^{\otimes{n}}$} & \setwiretype{q} & \gate[4]{\hat{U}({\boldsymbol\lambda})} & \gate[4]{\hat{O}/\hat{I}} & \gate[4]{\hat{\mathcal{U}}^{\dagger}({\boldsymbol\lambda})} & \\ [-0.6cm]
        & & & & & \\ [-0.6cm]
        & & & & & \\ 
        & & & & &
        \end{quantikz}