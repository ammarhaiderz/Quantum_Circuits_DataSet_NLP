\begin{quantikz}
        \qw  & \qw & \qw & \qw & \octrl{1}   & \\
        \lstick[3]{$\ket{\ell}$}  
          & \gate[3, style={fill=yellow!40, rounded corners}]{\text{PREPARE}} 
          & \gate[4, style={fill=brown!60, rounded corners}]{\text{SELECT}} 
          & \gate[3, style={fill=yellow!40, rounded corners}]{\text{PREPARE}^{-1}} 
          & \octrl{1} &\qw \\
          & \qw &  &    & \octrl{-1} &\qw \\
          & \qw &  &    & \ctrl{-1} &\qw \\
        \lstick{$\ket{\psi}$}  
          & \qwbundle{n} 
          & \qw & \qw & \qw  &
    \end{quantikz}