\begin{quantikz}[wire types={b,b,b,b},classical gap=0.07cm]
			\lstick{$\ket{0}^{\otimes r}$} &\gate[3,label style={yshift=5mm}]{\mathrm{NRS}}\gategroup[
				3,
				steps=3,
				style={
						dashed,
						rounded corners,
						fill=teal!30,
						inner xsep=2pt
					},
				background,
				label style={
						label position=above,
						anchor=south,
						yshift=-0.15cm
					}
			]{$\mathrm{NR}_{1\to L-1}$}\gateoutput{$\rightarrow$}&&\gate[3,label style={yshift=5mm}]{\mathrm{NRS}}&&\gate[3]{\mathrm{NR}_{1\to L-1}^\dagger}&\rstick{$\ket{x_1}$}
			\\
			\lstick{$\ket{S}$} &&&&\gate[3,label style={yshift=5mm}]{\mathrm{NRS}}&&\rstick{$\ket{S}$}
			\\
			\lstick{$\ket{x_0}$} &&\gate{\prod_{d=0}^{r-1}X_d^{x_{0,d}}}&\gateoutput{$\rightarrow$}&&&\rstick{$\ket{x_2}$}
			\\
			\lstick{$\ket{0}^{\otimes r}$} &&&&\gateoutput{$\rightarrow$}&&\rstick{$\ket{x_3}$}
		\end{quantikz}