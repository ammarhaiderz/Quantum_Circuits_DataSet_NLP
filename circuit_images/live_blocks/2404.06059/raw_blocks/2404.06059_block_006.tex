\Qcircuit @C=0.67em @R=1em @!R @!C{
    \lstick{\ket{x_1}} & \ctrl{1} & \ctrl{3} & \ctrl{5} & \ctrl{7} & \qw &&& \qw & \ctrl{1} & \qw & \ctrl{3} & \qw & \ctrl{5} & \qw & \ctrl{7} & \qw & \qw &&& \qw & \ctrl{1} & \ctrl{3} & \ctrl{5} & \ctrl{7} & \qw & \qw \\
    \lstick{\ket{x_2}} & \qswap \qwx[1] & \qw & \qw & \qw & \qw &&& \targ & \ctrl{1} & \targ & \qw & \qw & \qw & \qw & \qw & \qw & \qw &&& \targ & \ctrl{1} & \qw & \qw & \qw & \targ & \qw \\
    \lstick{\ket{0}_1} & \qswap & \qw & \qw & \qw & \qw &&& \ctrl{-1} & \targ & \ctrl{-1} & \qw & \qw & \qw & \qw & \qw & \qw & \qw &&& \ctrl{-1} & \targ & \qw & \qw & \qw & \ctrl{-1} & \qw \\
    \lstick{\ket{x_3}} & \qw & \qswap \qwx[1] & \qw & \qw & \qw &&& \qw & \qw & \targ & \ctrl{1} & \targ & \qw & \qw & \qw & \qw & \qw &&& \targ & \qw & \ctrl{1} & \qw & \qw & \targ & \qw \\
    \lstick{\ket{0}_2} & \qw & \qswap & \qw & \qw & \qw &\push{=}&& \qw & \qw & \ctrl{-1} & \targ & \ctrl{-1} & \qw & \qw & \qw & \qw & \qw &\push{=}&& \ctrl{-1} & \qw & \targ & \qw & \qw & \ctrl{-1} & \qw \\
    \lstick{\ket{x_4}} & \qw & \qw & \qswap \qwx[1] & \qw & \qw &&& \qw & \qw & \qw & \qw & \targ & \ctrl{1} & \targ & \qw & \qw & \qw &&& \targ & \qw & \qw & \ctrl{1} & \qw & \targ & \qw \\
    \lstick{\ket{0}_3} & \qw & \qw & \qswap & \qw & \qw &&& \qw & \qw & \qw & \qw & \ctrl{-1} & \targ & \ctrl{-1} & \qw & \qw & \qw &&& \ctrl{-1} & \qw & \qw & \targ & \qw & \ctrl{-1} & \qw \\
    \lstick{\ket{x_5}} & \qw & \qw & \qw & \qswap \qwx[1] & \qw &&& \qw & \qw & \qw & \qw & \qw & \qw & \targ & \ctrl{1} & \targ & \qw &&& \targ & \qw & \qw & \qw & \ctrl{1} & \targ & \qw \\
    \lstick{\ket{0}_4} & \qw & \qw & \qw & \qswap & \qw &&& \qw & \qw & \qw & \qw & \qw & \qw & \ctrl{-1} & \targ & \ctrl{-1} & \qw &&& \ctrl{-1} & \qw & \qw & \qw & \targ & \ctrl{-1} & \qw \gategroup{1}{22}{9}{25}{0.9em}{--}
}