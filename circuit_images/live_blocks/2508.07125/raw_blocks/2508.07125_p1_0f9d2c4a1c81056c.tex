\begin{quantikz}
    \lstick{data} &&&&&&&& \gate{Z} &&& \gate{R(G'_{d}) } &&&&&&&& \\
    \lstick{del} & &&&&& \targ{} & \targ{} & \targ{} & \targ{} & \targ{} && &&&&&&& \\
    \lstick{in range} &  &&&&& \targ{} & \targ{} & \targ{} & \targ{} & \octrl{-1} &&&&&&&&&\\
  \lstick{$s^{hi}$} & \gate[4]{H^{\bigoplus \log_2 (2D)}} & \ctrl{1} & \ctrl{1} & \octrl{1} & \midstick[2]{$d^{ind}$} &  \octrl{-2} & \octrl{-2} & \ctrl{-2} & \ctrl{-2} & & \dctrlslash{} & \octrl{1} & \ctrl{1} & \ctrl{1} & \octrl{1} & \ctrl{1} & \ctrl{1} & \gate[4]{H^{\bigoplus \log_2 (2D)}}&\\
  \lstick{$s^{mid}$} & & \ctrl{2} & \octrl{2} & \ctrl{2} && \octrl{-1} & \ctrl{-1} & \octrl{-1} & \ctrl{-1} && \dctrlslash{} \wire[u][1]{q} & \ctrl{2}& \octrl{2} & \ctrl{2} & \ctrl{2} &\octrl{2} & \ctrl{2}&&\\
  \lstick{$s^{else}$} & \qwbundle{} & &&& \midstick{$d^{val}$} & & & & & \dprime \wire[u][3]{q} & \dctrlslash{} \wire[u][5]{q}&&&&&&&&\\
  \lstick{$s^{lo}$} & & \octrl{2} & \octrl{3} & \octrl{1} & \midstick{$m^{hi}$} & \ctrl{-2} &&&&&& \targ{} & \targ{}& \targ{} & \octrl{1} & \octrl{3} & \octrl{2} &&\\
  \lstick[3]{$j$} & \qwbundle{N_c} &&& \gate[3]{+1}& \midstick[3]{$m^{lo}$}&&  && \octrl{-3} &&&&&&\gate[3]{-1} &&&& \\
  & \qwbundle{N_b} & \gate{+1} &&  & & && \octrl{-4} &&&&&&& & & \gate{-1} && \rstick[2]{i}\\
  & \qwbundle{N_a} && \gate{+1} && & & \octrl{-5} &&&&&&&&&\gate{-1}&&&
\end{quantikz}