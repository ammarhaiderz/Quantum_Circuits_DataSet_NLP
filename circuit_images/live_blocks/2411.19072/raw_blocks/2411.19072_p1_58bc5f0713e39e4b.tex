\begin{quantikz}[row sep=0.1cm]
   \lstick{$\ket{0}$} \qw & \gate{H}& \octrl{3} & \ctrl{1} & \ctrl{2} &  \gate{H} & \meter{} \\
    \lstick{$\ket{0}$} &  & \targ{}  & \gate[3]{U_A} & \gate[4]{\textrm{{\sc swap}}} & & \\
    \lstick{$\ket{0}$} & \qwbundle{n-2} &   &  &  & & \\
    \lstick{$\ket{0}$} &  & \targ{}  &  &  & & \\
    \lstick{$\ket{0}$} & \qwbundle{n} &  & \gate{U_B} &  & & 
    \end{quantikz}